# Team C Extensibility + Automation Platform Research

Date: 2026-02-23

## Scope and method
This research covers Team C scope for skills, mods, extensions, automations, native actions, harness, adaptive intent, and plan runner.

Primary contract and planning sources:
- `/Users/bikram/Developer/CodexChat/AGENTS.md:7`
- `/Users/bikram/Developer/CodexChat/AGENTS.md:68`
- `/Users/bikram/Developer/CodexChat/README.md:117`
- `/Users/bikram/Developer/CodexChat/docs-public/planning/workstreams.md:120`
- `/Users/bikram/Developer/CodexChat/docs-public/planning/feature-inventory.md:28`
- `/Users/bikram/Developer/CodexChat/docs-public/planning/user-journeys.md:163`

Primary implementation and tests reviewed:
- `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift:296`
- `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModInstallService.swift:133`
- `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModPackageManifest.swift:173`
- `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Sources/CodexExtensions/ExtensionWorkerRunner.swift:46`
- `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Sources/CodexExtensions/LaunchdManager.swift:42`
- `/Users/bikram/Developer/CodexChat/packages/CodexComputerActions/Sources/CodexComputerActions/ComputerActionRegistry.swift:39`
- `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:75`
- `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ComputerActions.swift:86`
- `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ComputerActionHarness.swift:12`
- `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+AdaptiveIntent.swift:15`
- `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+PlanRunner.swift:91`

Assumption: This report reflects code and tests currently present in this branch/worktree and does not infer hidden private docs.

## 1) Extensibility architecture map and trust boundaries

### 1.1 Architecture map
| Layer | Responsibilities | Evidence |
|---|---|---|
| Skills catalog/install layer | Discover skills across global/project roots, install via git/npx, update/reinstall with atomic swap | `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift:296`, `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift:362`, `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift:775` |
| Mods package/discovery/install layer | Validate `codex.mod.json` + `ui.mod.json`, discover mods by scope, install/update from local or GitHub source | `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModPackageManifest.swift:173`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/UIModDiscoveryService.swift:11`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModInstallService.swift:133` |
| Extension execution layer | Run hook/automation handlers through worker protocol with timeout/output bounds | `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Sources/CodexExtensions/ExtensionModels.swift:165`, `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Sources/CodexExtensions/ExtensionWorkerRunner.swift:46` |
| App orchestration layer | Sync active mods/hooks/automations, prompt permissions, apply worker outputs, route mods bar actions | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:75`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:518`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:331` |
| Automation layer | In-app cron scheduler + optional launchd background scheduling for `runWhenAppClosed` | `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Sources/CodexExtensions/ExtensionAutomationScheduler.swift:16`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:939`, `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Sources/CodexExtensions/LaunchdManager.swift:82` |
| Native action layer | Preview/confirm/execute/undo OS-level actions and persist action runs/permissions | `/Users/bikram/Developer/CodexChat/packages/CodexComputerActions/Sources/CodexComputerActions/ComputerActionRegistry.swift:39`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ComputerActions.swift:86` |
| Harness bridge layer | Local socket bridge for tool-driven native actions with session/run token validation | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ComputerActionHarness.swift:84`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/ComputerActionHarnessServer.swift:31` |
| Adaptive intent + plan runner layer | Composer intent routing and dependency-aware plan execution | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+AdaptiveIntent.swift:60`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+PlanRunner.swift:126`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/PlanRunner/PlanScheduler.swift:33` |

### 1.2 Trust boundaries
| Boundary | Untrusted input | Guardrails | Evidence |
|---|---|---|---|
| Skill sources | Git URLs, npx packages, remote catalog JSON | Host allowlist heuristic, source sanitization, atomic reinstall rollback | `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift:518`, `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift:652`, `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift:775` |
| Mod package source | Local/GitHub package content | Strict manifest validation, safe entrypoint path checks, permission declaration checks, checksum option | `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModPackageManifest.swift:190`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModPackageManifest.swift:295`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModPackageManifest.swift:223` |
| Extension worker output | JSON output, markdown, artifact paths | First-line JSON decode only, timeout/output caps, artifact path confinement under project root | `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Sources/CodexExtensions/ExtensionWorkerRunner.swift:105`, `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Sources/CodexExtensions/ExtensionWorkerRunner.swift:116`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:768` |
| Harness IPC | Socket requests/arguments JSON | Protocol version match, session token, run token TTL, payload size caps, socket chmod 0600 | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ComputerActionHarness.swift:85`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ComputerActionHarness.swift:119`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/ComputerActionHarnessServer.swift:32`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/ComputerActionHarnessServer.swift:116` |

## 2) Capability inventory (Built / Partial / Missing)
| Capability | Status | Evidence | Notes |
|---|---|---|---|
| Skills discovery across global+project roots | Built | `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift:619`, `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Tests/CodexSkillsTests/CodexSkillsTests.swift:9` | Includes discovery cache invalidation by root signatures. |
| Skills install/update/reinstall + rollback | Built | `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift:362`, `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift:416`, `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift:775`, `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Tests/CodexSkillsTests/CodexSkillsTests.swift:394` | Reinstall path is crash-safe via backup restoration. |
| Mod package validation (`codex.mod.json`) | Built | `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModPackageManifest.swift:173`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Tests/CodexModsTests/ModInstallServiceTests.swift:7` | Enforces schema version, path safety, permission declaration completeness. |
| Mod discovery (`ui.mod.json`) + legacy rejection | Built | `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/UIModDiscoveryService.swift:11`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Tests/CodexModsTests/ModInstallServiceTests.swift:448`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Tests/CodexModsTests/ModInstallServiceTests.swift:473` | Rejects `schemaVersion:2` and `uiSlots.rightInspector`. |
| Mod install/update from local/GitHub with rollback on update failure | Built | `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModInstallService.swift:133`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModInstallService.swift:181`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Tests/CodexModsTests/ModInstallServiceTests.swift:206`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Tests/CodexModsTests/ModInstallServiceTests.swift:403` | Includes GitHub tree URL support and blob URL rejection guidance. |
| Advanced executable mods lock | Built | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+AdvancedExecutableMods.swift:64`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ModsSurface.swift:296` | New installs can be locked unless vetted first-party or explicit unlock. |
| Extension worker protocol + bounded execution | Built | `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Sources/CodexExtensions/ExtensionModels.swift:165`, `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Sources/CodexExtensions/ExtensionWorkerRunner.swift:46`, `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Tests/CodexExtensionsTests/CodexExtensionsTests.swift:41` | Worker output and action schema are typed and test-covered. |
| Hook execution + permission prompts + artifact application | Built | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:489`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:644`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:768` | Artifact writes are path-confined and atomic. |
| Mods bar action dispatch (`emitEvent`, prompt, composer insert/send, native.action`) | Built | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:331`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/ModsBarActionTests.swift:42` | Includes targeted mod/hook routing checks in tests. |
| Automation scheduler + background launchd wiring | Built | `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Sources/CodexExtensions/ExtensionAutomationScheduler.swift:16`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:939`, `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Sources/CodexExtensions/LaunchdManager.swift:82`, `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Tests/CodexExtensionsTests/LaunchdManagerTests.swift` | Runtime behavior exists with direct launchd regression coverage. |
| Native computer actions registry + preview/confirm/undo | Built | `/Users/bikram/Developer/CodexChat/packages/CodexComputerActions/Sources/CodexComputerActions/ComputerActionRegistry.swift:39`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ComputerActions.swift:86`, `/Users/bikram/Developer/CodexChat/packages/CodexComputerActions/Tests/CodexComputerActionsTests/CodexComputerActionsTests.swift:6` | Covers desktop/calendar/reminders/messages/files/applescript actions. |
| Harness bridge for native actions | Built | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ComputerActionHarness.swift:84`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/ComputerActionHarnessServer.swift:187`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/ComputerActionHarnessServerTests.swift`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/AppModelHarnessAuthorizationTests.swift` | Core guardrails and negative-path request handling are now directly regression-tested. |
| Adaptive intent routing (native actions only) | Built | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+AdaptiveIntent.swift:38`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+FollowUps.swift:13`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/AppModelComputerActionsTests.swift:131` | Plan-run and role-setup intents are parsed but intentionally not auto-routed. |
| Plan runner parser/scheduler/execution | Built | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+PlanRunner.swift:126`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/PlanRunner/PlanParser.swift:37`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/PlanRunner/PlanRunnerTests.swift:4` | Includes cycle detection, batching, marker parsing, persistence updates. |
| Extensibility diagnostics export + retention + recovery playbooks | Built | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/ExtensibilityProcessFailureDiagnostics.swift:127`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/ExtensibilityDiagnosticsExporter.swift:16`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Diagnostics.swift:36`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/DiagnosticsView.swift:120`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/SettingsView.swift:867`, `/Users/bikram/Developer/CodexChat/packages/CodexChatCore/Sources/CodexChatCore/Models.swift:358` | Diagnostics are exportable as JSON, retention is user-configurable (clamped/persisted), and category-specific recovery hints are visible inline. |
| End-to-end signed provenance/pinning for skills+mods | Missing | `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift:518`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModPackageManifest.swift:223` | Skills rely on trust heuristic; mod checksum is optional, not mandatory for remote installs. |

Assumption: “Missing” here means missing in currently reviewed code paths, not necessarily blocked by upstream runtime capabilities.

## 3) Safety and permissions matrix by capability
| Capability | Permission model | Confirmation model | External-input hardening | Evidence |
|---|---|---|---|---|
| Skills install/update | Trust heuristic (`isTrustedSource`) and explicit user-triggered install | No extra in-flow confirmation in service layer | Source sanitization + atomic reinstall rollback + bounded process timeout/output capture | `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift:518`, `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift:652`, `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift:775`, `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift` |
| Mods install/validation | Declared permissions in `codex.mod.json` must cover runtime requested permissions | Review/install flow in app; executable lock can keep mod disabled | Safe path checks, schema checks, optional checksum, GitHub source parsing/blob rejection, bounded process timeout/output capture | `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModPackageManifest.swift:190`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ModsSurface.swift:296`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModInstallService.swift:331` |
| Extension hooks/automations | Per-mod permission records with prompt-on-missing | NSAlert allow/deny on first privileged use | Worker timeout/output caps; log sanitization | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:644`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:693`, `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Sources/CodexExtensions/ExtensionWorkerRunner.swift:105`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:922` |
| Extension artifacts | Implicitly requires granted `projectWrite` path | No additional modal; applied after worker run | Confines write under selected project root + atomic file write | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:768` |
| Background automation | Requires both `runWhenAppClosed` and global background automation preference | One-time global allow/deny alert + per-mod permission checks | launchd StartInterval clamp and sanitized error logging | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:939`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:1163`, `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Sources/CodexExtensions/LaunchdManager.swift:50` |
| Native actions | Per-action permission decision (non-read-only), with per-run prompt for AppleScript | Preview required for externally-visible/destructive actions, then explicit confirm | Provider preview-validation binding by run context | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ComputerActions.swift:596`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ComputerActions.swift:610`, `/Users/bikram/Developer/CodexChat/packages/CodexComputerActions/Sources/CodexComputerActions/ComputerActionTypes.swift:115` |
| Harness bridge | Session token + run token + protocol version + payload size checks | Returns `queued_for_approval` and waits for user approval path | Local unix socket with 0600 permissions and max request bytes | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ComputerActionHarness.swift:85`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ComputerActionHarness.swift:150`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/ComputerActionHarnessServer.swift:32`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/ComputerActionHarnessServer.swift:116` |
| Plan runner | Uses runtime dispatch + existing runtime approvals | User starts/stops runs; no dedicated plan-level permission prompt | Parser validates dependencies; scheduler blocks cycles | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/PlanRunner/PlanParser.swift:88`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/PlanRunner/PlanScheduler.swift:63`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+PlanRunner.swift:218` |

## 4) Test coverage and reliability matrix
| Area | Coverage found | Evidence | Reliability notes / gap |
|---|---|---|---|
| Skills service | Strong package tests for discovery, trust classification, install/update/reinstall rollback, and bounded process timeout/output behavior | `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Tests/CodexSkillsTests/CodexSkillsTests.swift:9`, `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Tests/CodexSkillsTests/CodexSkillsTests.swift:161`, `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Tests/CodexSkillsTests/CodexSkillsTests.swift:394` | Remaining gap is de-duplicating process-runner logic with mods/extensions into one shared adapter. |
| Mods package/install layer | Strong package tests for schema, manifest mismatch, source parsing, rollback, sample scaffolding | `/Users/bikram/Developer/CodexChat/packages/CodexMods/Tests/CodexModsTests/ModInstallServiceTests.swift:7`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Tests/CodexModsTests/ModInstallServiceTests.swift:331`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Tests/CodexModsTests/ModInstallServiceTests.swift:403`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Tests/CodexModsTests/ModInstallServiceTests.swift:572` | Good rollback and schema hardening coverage at package boundary. |
| Extensions runtime package | Good coverage for cron parser, permission evaluator, worker runner, state store, first-party scripts, launchd manager, scheduler retry/backoff, and malformed-output fuzz set | `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Tests/CodexExtensionsTests/CodexExtensionsTests.swift:10`, `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Tests/CodexExtensionsTests/CodexExtensionsTests.swift:41`, `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Tests/CodexExtensionsTests/FirstPartyModsScriptsTests.swift:6`, `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Tests/CodexExtensionsTests/LaunchdManagerTests.swift`, `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Tests/CodexExtensionsTests/ExtensionAutomationSchedulerTests.swift` | Remaining gap: add corpus-driven malformed UTF-8 and multi-line framing fuzz if deeper parser stress testing becomes necessary. |
| App-level mods bar routing | Strong tests for action dispatch and targeted hook routing | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/ModsBarActionTests.swift:42`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/ModsBarActionTests.swift:118` | Good for routing; limited direct tests for permission prompt UX branches. |
| Native computer actions package | Strong provider-level tests across desktop/calendar/reminders/messages/files/applescript | `/Users/bikram/Developer/CodexChat/packages/CodexComputerActions/Tests/CodexComputerActionsTests/CodexComputerActionsTests.swift:6`, `/Users/bikram/Developer/CodexChat/packages/CodexComputerActions/Tests/CodexComputerActionsTests/CodexComputerActionsTests.swift:325`, `/Users/bikram/Developer/CodexChat/packages/CodexComputerActions/Tests/CodexComputerActionsTests/MessagesSendActionErrorMappingTests.swift:5` | Core provider behavior and error normalization are well covered. |
| App-level native action orchestration | Good tests for adaptive intent parsing and permission recovery notices | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/AppModelComputerActionsTests.swift:44`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/AppModelComputerActionsTests.swift:149`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/AppModelComputerActionsTests.swift:271` | Good orchestration coverage around preview/confirm and notice mapping. |
| Harness | Dedicated tests for malformed input, size caps, protocol mismatch, session/run token authorization, and malformed framing fuzz set | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/ComputerActionHarnessServerTests.swift`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/AppModelHarnessAuthorizationTests.swift` | Remaining gap: binary/non-UTF8 payload fuzzing can be added if socket-level parser hardening scope expands. |
| Plan runner | Strong parser/scheduler tests; runtime execution loop behavior mostly covered by code-path review | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/PlanRunner/PlanRunnerTests.swift:4`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+PlanRunner.swift:126` | Parser/scheduler deterministic logic is tested; execution-loop integration assertions can be expanded. |
| Advanced executable mods lock | Dedicated migration/enforcement tests present | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+AdvancedExecutableMods.swift:64`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ModsSurface.swift:296`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/AppModelAdvancedExecutableModsTests.swift` | Includes existing-user migration, new-user default lock, and install-time disabled behavior checks. |
| Extensibility diagnostics export/retention/playbooks | New focused tests for JSON payload shape, retention persistence/clamping, and category playbook mapping | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/ExtensibilityDiagnosticsExporterTests.swift:6`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/ExtensibilityDiagnosticsPersistenceTests.swift:40`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/ExtensibilityDiagnosticsPersistenceTests.swift:53`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Tests/CodexChatAppTests/ExtensibilityProcessFailureDiagnosticsTests.swift:74` | Adds deterministic coverage for export compatibility, retention safety bounds, and actionable recovery guidance mapping. |

Assumption: “No dedicated tests found” is based on searched targets under `apps/CodexChatApp/Tests/CodexChatAppTests` and `packages/*/Tests` in this branch.

## 5) Doc staleness findings (exact paths)
| Status | Prior stale/misaligned doc claim | Doc evidence | Implementation evidence |
|---|---|---|---|
| Resolved on this branch | Personal actions V1 scope listed too few actions | `/Users/bikram/Developer/CodexChat/docs-public/PERSONAL_ACTIONS.md` | Registry includes `calendar.create`, `calendar.update`, `calendar.delete`, `reminders.today`, `apple.script.run`, `files.read`, `files.move`: `/Users/bikram/Developer/CodexChat/packages/CodexComputerActions/Sources/CodexComputerActions/ComputerActionRegistry.swift:39` |
| Resolved on this branch | Phrase-based interception default text was ambiguous | `/Users/bikram/Developer/CodexChat/docs-public/PERSONAL_ACTIONS.md` | Composer submit path invokes adaptive intent routing and native actions default enabled when config key is absent: `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+FollowUps.swift:13`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ComputerActions.swift:880` |
| Resolved on this branch | Security model stated calendar was read-only in V1 | `/Users/bikram/Developer/CodexChat/docs-public/SECURITY_MODEL.md` | Calendar create/update/delete providers are shipped: `/Users/bikram/Developer/CodexChat/packages/CodexComputerActions/Sources/CodexComputerActions/ComputerActionRegistry.swift:6` |
| Resolved on this branch | Extensions quickstart stated unconditional auto-enable after install | `/Users/bikram/Developer/CodexChat/docs-public/EXTENSIONS_QUICKSTART.md` | Install path can keep executable mods disabled when advanced lock applies: `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ModsSurface.swift:296` |

## 6) Refactor opportunities to reduce cross-feature coupling
| Opportunity | Why coupling exists now | Proposed direction | Evidence |
|---|---|---|---|
| Unified capability policy engine | Permission logic is split across extension permissions, native-action permissions, and skill source trust heuristics | Shared primitive now gates plan-runner, extension hooks/automations (including `runWhenAppClosed`), native actions, project-scoped skill installs, and project-scoped mod install/update; next step is consolidating policy persistence/telemetry semantics | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/ExtensibilityCapabilityPolicy.swift`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ComputerActions.swift`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Skills.swift`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ModsSurface.swift` |
| Shared process-execution sandbox wrapper | Skills/mods/extensions now execute through shared `CodexProcess` primitives, app-level diagnostics normalize process/worker/launchd failures, diagnostics are visible in Diagnostics UX, persisted across restarts, exportable with configurable retention, and mapped to recovery playbooks | Next step is attaching one-click remediation actions to each diagnostics playbook (safe rerun or settings deep links) | `/Users/bikram/Developer/CodexChat/packages/CodexProcess/Sources/CodexProcess/BoundedProcessRunner.swift`, `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Sources/CodexExtensions/ExtensionWorkerRunner.swift:46`, `/Users/bikram/Developer/CodexChat/packages/CodexSkills/Sources/CodexSkills/SkillCatalog.swift`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModInstallService.swift`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/ExtensibilityProcessFailureDiagnostics.swift`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Diagnostics.swift:36`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/ExtensibilityDiagnosticsExporter.swift:16`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/DiagnosticsView.swift:120`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/SettingsView.swift:867` |
| Shared path-safety utility | CodexMods entrypoint/subpath checks now share `ModPathSafety`, but app artifact/project path checks are still a separate helper | Continue converging on reusable safe-path primitives for package install paths and app artifact write paths | `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModPathSafety.swift`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModPackageManifest.swift`, `/Users/bikram/Developer/CodexChat/packages/CodexMods/Sources/CodexMods/ModInstallService.swift`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift:779` |
| Plan runner + action bridge contract | Plan runner relies on runtime output markers while native actions/harness use separate approval semantics | Define explicit execution contract for plan tasks that invoke native actions/mod events through one auditable gate | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+PlanRunner.swift:233`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ComputerActionHarness.swift:150`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+RuntimeEvents.swift:413` |
| Background automation observability seam | Scheduling spans in-app scheduler and launchd path with separate status surfaces | Phase 2 shipped: app-level per-mod health summary now includes launchd scheduled/failure signal; next step is unifying launchd+scheduler telemetry and recovery actions into one timeline model | `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+Extensions.swift`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/AppModel+ModsSurface.swift`, `/Users/bikram/Developer/CodexChat/apps/CodexChatApp/Sources/CodexChatApp/ModViews.swift`, `/Users/bikram/Developer/CodexChat/packages/CodexExtensions/Sources/CodexExtensions/LaunchdManager.swift:82` |
